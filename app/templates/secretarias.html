<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/style.css">
    <title>Secretarias</title>
</head>
<nav>
  <ul id="main-nav" class="nav">
          <li><a href="/">Inicio</a> </li>
          <li><a href="/clientes">Clientes</a> 
          <li><a href="/secretarias">Secretarias</a>
    </ul>
</nav>
<body>
    <div class="mdc-data-table">
        <div class="mdc-data-table__table-container">
          <table class="mdc-data-table__table" aria-label="Dessert calories">
<form action="/login_secretaria" method="POST">
  <input type="int" placeholder="Ingrese su cedula" id="cedula" name="cedula"><br>
  <input type="int" placeholder="Ingrese su contraseña" id="contraseña" name="contraseña"><br>
  <input type="submit" value="Ingresar">
</form>
{% if error %}
    <span>{{error}}</span>
{% endif %}
{% if citas %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Fecha</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Hora</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Zona</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Duración</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in citas %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_cita({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_cita({{item.id}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.id}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.fecha}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.hora}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.zona}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.duracion}}</td>
            </tr>
        {% endfor %}
        {% endif %}
{% if enfermeras %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Tarjeta Profesional</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Cédula</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Nombre</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Sede</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in enfermeras %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_enfermera({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_enfermera({{item.cedula}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.tarjetaProfesional}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.cedula}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.nombre}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.sede_id}}</td>
            </tr>
        {% endfor %}
    </tbody>
  </table>
{% endif %}
{% if ofertas %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Precio</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Zona</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Inicio</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Fin</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Cédula Paciente</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Id cita</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Id sede</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in ofertas %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_oferta({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_oferta({{item.id}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.id}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.precio}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.zona}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.inicio}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.fin}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.paciente_cedula}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.citas_id}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.sede_id}}</td>
            </tr>
{% endfor %}
    </tbody>
  </table>
{% endif %}

{% if pacientes %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Cedula</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Nombre</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Apellidos</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Sede</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
      
      {% for item in pacientes %}
        <tr class="mdc-data-table__row">
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
            <div class="mdc-touch-target-wrapper">
              <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_paciente({{item}})">
                <div class="mdc-fab__ripple"></div>
                <span class="material-icons mdc-fab__icon">edit</span>
                <div class="mdc-fab__touch"></div>
              </button>
            </div>
          </td>
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
            <div class="mdc-touch-target-wrapper">
              <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_paciente({{item.cedula}})">
                <div class="mdc-fab__ripple"></div>
                <span class="material-icons mdc-fab__icon">delete</span>
                <div class="mdc-fab__touch"></div>
              </button>
            </div>
          </td>
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.cedula}}</td>
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.nombre}}</td>
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.apellidos}}</td>
          <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.sede_id}}</td>
        </tr>
      {% endfor %}

    </tbody>
  </table>
{% endif %}

{% if secretarias %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Cédula</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Nombre</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Sede</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in secretarias %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_secretaria({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_secretaria({{item.cedula}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.cedula}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.nombre}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.sede_id}}</td>
            </tr>
        {% endfor %}
    </tbody>
  </table>
{% endif %}
{% if sedes %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Centro Comercial</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Local</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Horario Apertura</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Horario Cierre</th>

      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in sedes %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_sede({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_sede({{item.id}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.id}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.centroComercial}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.local}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.horarioApertura}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.horarioCierre}}</td>
            </tr>
        {% endfor %}
    </tbody>
  </table>
{% endif %}
{% if telefonos %}
<table class="mdc-data-table__table" aria-label="Dessert calories">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Editar</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Eliminar</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID Sede</th>
        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Teléfono</th>
      </tr>
    </thead>
    <tbody class="mdc-data-table__content">
        {% for item in telefonos %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="editar_telefono({{item}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">edit</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
              <td class="mdc-data-table__cell mdc-data-table__cell--numeric">
                <div class="mdc-touch-target-wrapper">
                  <button class="mdc-fab mdc-fab--mini mdc-fab--touch" onclick="eliminar_telefono({{item.sede_id}})">
                    <div class="mdc-fab__ripple"></div>
                    <span class="material-icons mdc-fab__icon">delete</span>
                    <div class="mdc-fab__touch"></div>
                  </button>
                </div>
              </td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.telefono}}</td>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{item.sede_id}}</td>
            </tr>
        {% endfor %}
    </tbody>
  </table>
{% endif %}

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <form name="myForm" action="/actualizar_paciente" method="POST">
      <input type="hidden" id="cedula" name="cedula" value="">
      <label class="mdc-text-field mdc-text-field--filled">
        <span class="mdc-text-field__ripple"></span>
        <input class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" id="nombre" name="nombre"
         placeholder="Nombre">
        <span class="mdc-line-ripple"></span>
      </label>
      <label class="mdc-text-field mdc-text-field--filled">
        <span class="mdc-text-field__ripple"></span>
        <input class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" id="apellidos" name="apellidos"
        placeholder="Apellido">
        <span class="mdc-line-ripple"></span>
      </label>
      <div class="mdc-touch-target-wrapper">
        <button class="mdc-fab mdc-fab--mini mdc-fab--touch">
          <div class="mdc-fab__ripple"></div>
          <span class="material-icons mdc-fab__icon">send</span>
          <div class="mdc-fab__touch"></div>
        </button>
      </div>
    </form>
  </div>

</div>
<!--Borrado de tablas-->
<form action="/borrar_cita" method="POST" id="borrarCita" name="borrarCita">
  <input type="hidden" name="id" id="id"></form>
<form action="/borrar_enfermera" method="POST" id="borrarEnfermera" name="borrarEnfermera">
  <input type="hidden" name="cedula" id="cedula"></form>
<form action="/borrar_oferta" method="POST" id="borrarOferta" name="borrarOferta">
  <input type="hidden" name="id" id="id"></form>
<form action="/borrar_paciente" method="POST" id="borrarPaciente" name="borrarPaciente">
  <input type="hidden" name="cedula" id="cedula"></form>
<form action="/borrar_secretaria" method="POST" id="borrarSecretaria" name="borrarSecretaria">
  <input type="hidden" name="cedula" id="cedula"></form>
 <form action="/borrar_sede" method="POST" id="borrarSede" name="borrarSede">
  <input type="hidden" name="id" id="id"></form>
<form action="/borrar_telefono" method="POST" id="borrarTelefono" name="borrarTelefono">
  <input type="hidden" name="sede_id" id="sede_id"></form>      
</body>
</html>


<script>
  // Get the modal
  var modal = document.getElementById("myModal");
  
  // Get the button that opens the modal
  var btn = document.getElementsByClassName("myBtn");
  
  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];
  
  // When the user clicks the button, open the modal 
  btn.onclick = function() {
    modal.style.display = "block";
  }
  
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
  }
  
  function editar_paciente(data) {
    document.myForm.cedula.value = data.cedula;
    document.myForm.nombre.value = data.nombre;
    document.myForm.apellidos.value = data.apellidos;
    modal.style.display = "block";
  }

  function eliminar_paciente(cedula){
    var form=document.getElementById("borrarPaciente");
    document.borrarPaciente.cedula.value = cedula;
  
    form.submit();
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }

  
  </script>
  